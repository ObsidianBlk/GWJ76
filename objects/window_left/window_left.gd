@tool
extends Node2D

# ------------------------------------------------------------------------------
# Signals
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Constants and ENUMs
# ------------------------------------------------------------------------------

# ------------------------------------------------------------------------------
# Export Variables
# ------------------------------------------------------------------------------
@export var broken : bool = false:					set=set_broken
@export var interactable : Interactable = null:		set=set_interactable

# ------------------------------------------------------------------------------
# Variables
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Onready Variables
# ------------------------------------------------------------------------------
@onready var _window_broken_sprite: Sprite2D = %WindowBrokenSprite


# ------------------------------------------------------------------------------
# Setters / Getters
# ------------------------------------------------------------------------------
func set_broken(b : bool) -> void:
	if b != broken:
		broken = b
		_UpdateState()

func set_interactable(i : Interactable) -> void:
	if i != interactable:
		interactable = i
		_UpdateState()

# ------------------------------------------------------------------------------
# Override Methods
# ------------------------------------------------------------------------------
func _ready() -> void:
	_UpdateState()

# ------------------------------------------------------------------------------
# Private Methods
# ------------------------------------------------------------------------------
func _UpdateState() -> void:
	if _window_broken_sprite != null:
		_window_broken_sprite.visible = broken
	if interactable != null:
		interactable.interactable = broken


# ------------------------------------------------------------------------------
# Public Methods
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Handler Methods
# ------------------------------------------------------------------------------
func _on_interactable_interacted() -> void:
	broken = false
